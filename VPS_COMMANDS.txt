# –ö–û–ú–ê–ù–î–´ –î–õ–Ø VPS - –ü–û–õ–ù–û–ï –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ –°–û –°–¢–ê–†–û–ô –°–ï–°–°–ò–ï–ô

# ============================================
# –í–ê–†–ò–ê–ù–¢ 1: –ë–´–°–¢–†–û–ï –†–ï–®–ï–ù–ò–ï (–ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–∞—á–∞–ª–∞)
# ============================================

# 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ VPS
ssh your_user@your_vps_ip

# 2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd /var/www/html/nord-laundry-telegram-bot

# 3. –£–±–µ–π—Ç–µ –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
pm2 kill
pkill -9 node
pkill -9 chromium
sleep 3

# 4. –£–¥–∞–ª–∏—Ç–µ .wwebjs_auth –í–†–£–ß–ù–£–Æ
ls -la .wwebjs_auth/
rm -rf .wwebjs_auth/
sudo rm -rf .wwebjs_auth/

# 5. –£–¥–∞–ª–∏—Ç–µ Chromium user-data
rm -rf /tmp/chromium-user-data
sudo rm -rf /tmp/chromium-user-data

# 6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —É–¥–∞–ª–∏–ª–æ—Å—å
ls -la .wwebjs_auth/ 2>&1 | grep "No such file" && echo "‚úÖ –£–¥–∞–ª–µ–Ω–æ!" || echo "‚ùå –ï—â—ë —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!"

# 7. –î–æ–±–∞–≤—å—Ç–µ WHATSAPP_FORCE_RESET –≤ .env
echo "WHATSAPP_FORCE_RESET=true" >> .env

# 8. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç
npm run build
pm2 start ecosystem.config.cjs
pm2 save

# 9. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏
pm2 logs nord-laundry-bot

# –û–ñ–ò–î–ê–ô–¢–ï QR –ö–û–î –∏ –æ—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ —Å –ü–†–ê–í–ò–õ–¨–ù–û–ì–û —Ç–µ–ª–µ—Ñ–æ–Ω–∞!

# 10. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —É–¥–∞–ª–∏—Ç–µ —Ñ–ª–∞–≥
nano .env
# –£–¥–∞–ª–∏—Ç–µ –∏–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫—É WHATSAPP_FORCE_RESET=true

# 11. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
pm2 restart nord-laundry-bot

# ============================================
# –í–ê–†–ò–ê–ù–¢ 2: –ï–°–õ–ò –í–ê–†–ò–ê–ù–¢ 1 –ù–ï –ü–û–ú–û–ì
# ============================================

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
cd /var/www/html/nord-laundry-telegram-bot
git pull origin main
bash VPS_EXTREME_RESET.sh
# –í–≤–µ–¥–∏—Ç–µ 'yes'

# –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º —Å–∫—Ä–∏–ø—Ç–∞

# ============================================
# –ü–†–û–í–ï–†–ö–ê –†–ï–ó–£–õ–¨–¢–ê–¢–ê
# ============================================

# –í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# üîê QR –∫–æ–¥ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ WhatsApp:
# (–µ—Å–ª–∏ —Å–µ—Å—Å–∏—è —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞)

# –ü–æ—Å–ª–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:
# üì± –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û WHATSAPP –ê–ö–ö–ê–£–ù–¢–ï:
# üì± –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞: –ü–†–ê–í–ò–õ–¨–ù–´–ï_–¶–ò–§–†–´

# –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è:
# üîî –ü–û–õ–£–ß–ï–ù–û –°–û–ë–´–¢–ò–ï MESSAGE –û–¢ WHATSAPP
# üöÄ –ü–ï–†–ï–°–´–õ–ê–ï–ú –ó–ê–Ø–í–ö–£ –í TELEGRAM
# ‚úÖ‚úÖ‚úÖ –ó–ê–Ø–í–ö–ê –£–°–ü–ï–®–ù–û –û–¢–ü–†–ê–í–õ–ï–ù–ê –í TELEGRAM

# ============================================
# –ï–°–õ–ò –û–®–ò–ë–ö–ê "Failed to create socket directory"
# ============================================

# –≠—Ç–æ —Ä–µ—à–∞–µ—Ç—Å—è –≤ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –∫–æ–¥–∞!
# –ü—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
git pull origin main
npm run build
pm2 restart nord-laundry-bot

# ============================================
# –ß–ò–°–¢–ö–ê –í–°–ï–• CHROME –ö–≠–®–ï–ô (–µ—Å–ª–∏ —Å–æ–≤—Å–µ–º –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç)
# ============================================

sudo rm -rf /tmp/*chromium* /tmp/*chrome* /tmp/*puppeteer*
sudo rm -rf /var/tmp/*chromium* /var/tmp/*chrome*
sudo rm -rf ~/.config/chromium/ ~/.cache/chromium/
sudo rm -rf /root/.config/chromium/ /root/.cache/chromium/
sudo rm -rf /tmp/chromium-user-data

# –ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç –∑–∞–Ω–æ–≤–æ
