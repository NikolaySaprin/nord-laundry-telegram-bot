#!/bin/bash

echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Å—Å–∏–∏ WhatsApp..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏ —Å–µ—Å—Å–∏–∏
if [ -d ".wwebjs_auth" ]; then
    echo "‚úÖ –ü–∞–ø–∫–∞ —Å–µ—Å—Å–∏–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
    if [ "$(ls -A .wwebjs_auth)" ]; then
        echo "‚úÖ –ü–∞–ø–∫–∞ —Å–µ—Å—Å–∏–∏ –Ω–µ –ø—É—Å—Ç–∞—è"
        echo "üìÅ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ:"
        ls -la .wwebjs_auth/
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä –ø–∞–ø–∫–∏
        size=$(du -sh .wwebjs_auth | cut -f1)
        echo "üìä –†–∞–∑–º–µ—Ä –ø–∞–ø–∫–∏ —Å–µ—Å—Å–∏–∏: $size"
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
        echo "üîê –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:"
        ls -ld .wwebjs_auth/
        
    else
        echo "‚ö†Ô∏è –ü–∞–ø–∫–∞ —Å–µ—Å—Å–∏–∏ –ø—É—Å—Ç–∞—è"
    fi
else
    echo "‚ùå –ü–∞–ø–∫–∞ —Å–µ—Å—Å–∏–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"
    echo "üí° –ù—É–∂–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –∑–∞–Ω–æ–≤–æ"
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
echo ""
echo "üîÑ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:"
if pgrep -f "node.*bot-runner" > /dev/null; then
    echo "‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω"
    echo "üìã –ü—Ä–æ—Ü–µ—Å—Å—ã:"
    pgrep -f "node.*bot-runner" | xargs ps -p
else
    echo "‚ùå –ë–æ—Ç –Ω–µ –∑–∞–ø—É—â–µ–Ω"
fi

echo ""
echo "üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:"
echo "- –ï—Å–ª–∏ —Å–µ—Å—Å–∏—è –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∞, –∑–∞–ø—É—Å—Ç–∏—Ç–µ: ./clear-session.sh"
echo "- –ï—Å–ª–∏ –±–æ—Ç –Ω–µ –∑–∞–ø—É—â–µ–Ω, –∑–∞–ø—É—Å—Ç–∏—Ç–µ: npm start"
echo "- –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –Ω–æ–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, –æ—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR –∫–æ–¥"
