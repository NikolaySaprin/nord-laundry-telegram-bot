#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è WhatsApp –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
# –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ª–æ–∫–∞–ª—å–Ω–æ, —Ç–∞–∫ –∏ –Ω–∞ VPS
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–µ—Å—Å–∏—é –ø—Ä–∏ –µ—ë –∏—Å—Ç–µ—á–µ–Ω–∏–∏

AUTH_DIR=".wwebjs_auth"
ARCHIVE_FILE="whatsapp_auth_latest.tar.gz"
BACKUP_DIR="/opt/whatsapp-auth-backup"
LOG_FILE="./logs/auth-recovery.log"

# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ª–æ–≥–æ–≤, –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
mkdir -p logs

# –§—É–Ω–∫—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
log() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] $1" | tee -a "$LOG_FILE"
}

# –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ —Å–µ—Å—Å–∏–∏
check_session_integrity() {
    log "üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å WhatsApp —Å–µ—Å—Å–∏–∏..."
    
    if [ ! -d "$AUTH_DIR" ]; then
        log "‚ùå –ü–∞–ø–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
        return 1
    fi
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å–µ—Å—Å–∏–∏
    local required_files=("session-*" "LocalStorage" "IndexedDB")
    local missing_files=()
    
    for pattern in "${required_files[@]}"; do
        if ! ls "$AUTH_DIR"/$pattern >/dev/null 2>&1; then
            missing_files+=("$pattern")
        fi
    done
    
    if [ ${#missing_files[@]} -eq 0 ]; then
        log "‚úÖ –¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —Å–µ—Å—Å–∏–∏ –≤ –ø–æ—Ä—è–¥–∫–µ"
        return 0
    else
        log "‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã —Å–µ—Å—Å–∏–∏: ${missing_files[*]}"
        return 1
    fi
}

# –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ —Å–µ—Å—Å–∏–∏
check_session_freshness() {
    log "üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å WhatsApp —Å–µ—Å—Å–∏–∏..."
    
    if [ ! -d "$AUTH_DIR" ]; then
        log "‚ùå –ü–∞–ø–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
        return 1
    fi
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ —Å–µ—Å—Å–∏–∏
    local last_modified=$(find "$AUTH_DIR" -type f -name "session-*" -exec stat -c %Y {} \; 2>/dev/null | sort -n | tail -1)
    
    if [ -z "$last_modified" ]; then
        log "‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω—ã —Ñ–∞–π–ª—ã —Å–µ—Å—Å–∏–∏"
        return 1
    fi
    
    local current_time=$(date +%s)
    local age_days=$(( (current_time - last_modified) / 86400 ))
    
    log "üìÖ –í–æ–∑—Ä–∞—Å—Ç —Å–µ—Å—Å–∏–∏: $age_days –¥–Ω–µ–π"
    
    # –ï—Å–ª–∏ —Å–µ—Å—Å–∏—è —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π, —Å—á–∏—Ç–∞–µ–º –µ—ë —É—Å—Ç–∞—Ä–µ–≤—à–µ–π
    if [ $age_days -gt 30 ]; then
        log "‚ö†Ô∏è –°–µ—Å—Å–∏—è —É—Å—Ç–∞—Ä–µ–ª–∞ (—Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π), —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ"
        return 1
    fi
    
    log "‚úÖ –°–µ—Å—Å–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞"
    return 0
}

# –§—É–Ω–∫—Ü–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏
restore_session() {
    log "üîÑ –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º WhatsApp —Å–µ—Å—Å–∏—é..."
    
    # –ò—â–µ–º –∞—Ä—Ö–∏–≤ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
    local archive_path=""
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
    if [ -f "$ARCHIVE_FILE" ]; then
        archive_path="$ARCHIVE_FILE"
        log "üì¶ –ù–∞–π–¥–µ–Ω –∞—Ä—Ö–∏–≤ –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏: $ARCHIVE_FILE"
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –±—ç–∫–∞–ø–∞
    elif [ -f "$BACKUP_DIR/$ARCHIVE_FILE" ]; then
        archive_path="$BACKUP_DIR/$ARCHIVE_FILE"
        log "üì¶ –ù–∞–π–¥–µ–Ω –∞—Ä—Ö–∏–≤ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –±—ç–∫–∞–ø–∞: $BACKUP_DIR/$ARCHIVE_FILE"
    # –ò—â–µ–º –ª—é–±–æ–π –∞—Ä—Ö–∏–≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    else
        archive_path=$(find . -name "whatsapp_auth_*.tar.gz" -type f -printf '%T@ %p\n' 2>/dev/null | sort -n | tail -1 | cut -d' ' -f2-)
        if [ -n "$archive_path" ]; then
            log "üì¶ –ù–∞–π–¥–µ–Ω –∞—Ä—Ö–∏–≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏: $archive_path"
        fi
    fi
    
    if [ -z "$archive_path" ] || [ ! -f "$archive_path" ]; then
        log "‚ùå –ê—Ä—Ö–∏–≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω"
        return 1
    fi
    
    # –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–µ—Å—Å–∏–∏
    if [ -d "$AUTH_DIR" ]; then
        local backup_name="backup_$(date +%Y%m%d_%H%M%S)"
        log "üíæ –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–µ—Å—Å–∏–∏: $backup_name"
        cp -r "$AUTH_DIR" "${AUTH_DIR}_${backup_name}" 2>/dev/null || true
    fi
    
    # –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—É—é –ø–∞–ø–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    rm -rf "$AUTH_DIR"
    
    # –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    mkdir -p "$AUTH_DIR"
    
    # –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–∑ –∞—Ä—Ö–∏–≤–∞
    log "üîÑ –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–µ—Å—Å–∏—é –∏–∑ –∞—Ä—Ö–∏–≤–∞: $archive_path"
    
    if tar -xzf "$archive_path" -C .; then
        log "‚úÖ –°–µ—Å—Å–∏—è —É—Å–ø–µ—à–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏–∑ –∞—Ä—Ö–∏–≤–∞"
        
        # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
        chmod -R 755 "$AUTH_DIR"
        chown -R $(whoami):$(whoami) "$AUTH_DIR" 2>/dev/null || true
        
        # –°–æ–∑–¥–∞–µ–º –±—ç–∫–∞–ø –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (–µ—Å–ª–∏ –Ω–∞ VPS)
        if [ -d "/opt" ]; then
            mkdir -p "$BACKUP_DIR"
            cp "$archive_path" "$BACKUP_DIR/" 2>/dev/null || true
            log "‚úÖ –ë—ç–∫–∞–ø –∞—Ä—Ö–∏–≤–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤: $BACKUP_DIR"
        fi
        
        return 0
    else
        log "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–µ—Å—Å–∏–∏ –∏–∑ –∞—Ä—Ö–∏–≤–∞"
        return 1
    fi
}

# –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∞—Ä—Ö–∏–≤–∞ —Å–µ—Å—Å–∏–∏
create_session_archive() {
    log "üì¶ –°–æ–∑–¥–∞–µ–º –∞—Ä—Ö–∏–≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏..."
    
    if [ ! -d "$AUTH_DIR" ]; then
        log "‚ùå –ü–∞–ø–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
        return 1
    fi
    
    # –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π –∞—Ä—Ö–∏–≤, –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
    if [ -f "$ARCHIVE_FILE" ]; then
        rm -f "$ARCHIVE_FILE"
        log "üóëÔ∏è –£–¥–∞–ª–µ–Ω —Å—Ç–∞—Ä—ã–π –∞—Ä—Ö–∏–≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏"
    fi
    
    # –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –∞—Ä—Ö–∏–≤
    if tar -czf "$ARCHIVE_FILE" "$AUTH_DIR/"; then
        log "‚úÖ –ê—Ä—Ö–∏–≤ —Å–µ—Å—Å–∏–∏ —Å–æ–∑–¥–∞–Ω: $ARCHIVE_FILE"
        
        # –°–æ–∑–¥–∞–µ–º –±—ç–∫–∞–ø –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (–µ—Å–ª–∏ –Ω–∞ VPS)
        if [ -d "/opt" ]; then
            mkdir -p "$BACKUP_DIR"
            cp "$ARCHIVE_FILE" "$BACKUP_DIR/" 2>/dev/null || true
            log "‚úÖ –ë—ç–∫–∞–ø –∞—Ä—Ö–∏–≤–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤: $BACKUP_DIR"
        fi
        
        return 0
    else
        log "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞—Ä—Ö–∏–≤–∞ —Å–µ—Å—Å–∏–∏"
        return 1
    fi
}

# –§—É–Ω–∫—Ü–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–µ—Å—Å–∏–∏
monitor_session() {
    log "üëÅÔ∏è –ó–∞–ø—É—Å–∫–∞–µ–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Å—Å–∏–∏..."
    
    while true; do
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —Å–µ—Å—Å–∏–∏
        if ! check_session_integrity; then
            log "‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å—é —Å–µ—Å—Å–∏–∏, –ø—ã—Ç–∞–µ–º—Å—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å..."
            if restore_session; then
                log "‚úÖ –°–µ—Å—Å–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞"
            else
                log "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Å—Å–∏—é"
            fi
        fi
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å —Å–µ—Å—Å–∏–∏
        if ! check_session_freshness; then
            log "‚ö†Ô∏è –°–µ—Å—Å–∏—è —É—Å—Ç–∞—Ä–µ–ª–∞, —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –∞—Ä—Ö–∏–≤..."
            create_session_archive
        fi
        
        # –ñ–¥–µ–º 5 –º–∏–Ω—É—Ç –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–µ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π
        sleep 300
    done
}

# –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
main() {
    log "üöÄ –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è WhatsApp –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏"
    
    case "${1:-}" in
        "check")
            log "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Å—Å–∏–∏"
            if check_session_integrity && check_session_freshness; then
                log "‚úÖ –°–µ—Å—Å–∏—è –≤ –ø–æ—Ä—è–¥–∫–µ"
                exit 0
            else
                log "‚ùå –°–µ—Å—Å–∏—è —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è"
                exit 1
            fi
            ;;
        "restore")
            log "üîÑ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏"
            if restore_session; then
                log "‚úÖ –°–µ—Å—Å–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞"
                exit 0
            else
                log "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Å—Å–∏—é"
                exit 1
            fi
            ;;
        "archive")
            log "üì¶ –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞ —Å–µ—Å—Å–∏–∏"
            if create_session_archive; then
                log "‚úÖ –ê—Ä—Ö–∏–≤ —Å–æ–∑–¥–∞–Ω"
                exit 0
            else
                log "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∞—Ä—Ö–∏–≤"
                exit 1
            fi
            ;;
        "monitor")
            log "üëÅÔ∏è –ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–µ—Å—Å–∏–∏"
            monitor_session
            ;;
        "help"|"-h"|"--help")
            echo "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: $0 [–∫–æ–º–∞–Ω–¥–∞]"
            echo ""
            echo "–ö–æ–º–∞–Ω–¥—ã:"
            echo "  (–±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤) - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ"
            echo "  check            - —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Å—Å–∏–∏"
            echo "  restore          - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ"
            echo "  archive          - —Å–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏"
            echo "  monitor          - –∑–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–µ—Å—Å–∏–∏"
            echo "  help             - –ø–æ–∫–∞–∑–∞—Ç—å —ç—Ç—É —Å–ø—Ä–∞–≤–∫—É"
            ;;
        *)
            # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
            if check_session_integrity && check_session_freshness; then
                log "‚úÖ –°–µ—Å—Å–∏—è –≤ –ø–æ—Ä—è–¥–∫–µ, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è"
                exit 0
            else
                log "‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Å—Å–∏–µ–π, –ø—ã—Ç–∞–µ–º—Å—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å..."
                if restore_session; then
                    log "‚úÖ –°–µ—Å—Å–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞"
                    exit 0
                else
                    log "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Å—Å–∏—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏"
                    log "üí° –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–æ–µ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ:"
                    log "   1. –°–æ–∑–¥–∞–π—Ç–µ –∞—Ä—Ö–∏–≤ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ"
                    log "   2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –µ–≥–æ –Ω–∞ VPS"
                    log "   3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: $0 restore"
                    exit 1
                fi
            fi
            ;;
    esac
}

# –ó–∞–ø—É—Å–∫–∞–µ–º –æ—Å–Ω–æ–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
main "$@"
